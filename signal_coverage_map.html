<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å—é€šå¸‚ä¿¡å·è¦†ç›–åœ°å›¾</title>
    <style>
        /* é¡µé¢æ•´ä½“æ ·å¼ */
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background-color: #f8f9fa;
        }

        /* æ ‡é¢˜åŒºåŸŸ */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            margin: 0;
            font-size: 24px;
        }

        .header p {
            margin: 8px 0 0 0;
            opacity: 0.9;
        }

        /* ä¿¡æ¯é¢æ¿ */
        .info-panel {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* åœ°å›¾å®¹å™¨ */
        #map {
            width: 100%;
            height: 500px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        /* å›¾ä¾‹æ ·å¼ */
        .legend {
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border: 1px solid #dee2e6;
        }

        .legend h4 {
            margin: 0 0 10px 0;
            color: #333;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin: 8px 0;
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 10px;
        }

        .red { background-color: #dc3545; }
        .blue { background-color: #007bff; }
        .green { background-color: #28a745; }
    </style>
</head>
<body>
    <!-- é¡µé¢æ ‡é¢˜ -->
    <div class="header">
        <h1>ğŸ—ºï¸ å—é€šå¸‚ä¿¡å·è¦†ç›–åœ°å›¾</h1>
        <p>å®æ—¶ç›‘æµ‹ç½‘ç»œä¿¡å·è´¨é‡åˆ†å¸ƒæƒ…å†µ</p>
    </div>

    <!-- ä¿¡æ¯é¢æ¿ -->
    <div class="info-panel">
        <h3>ğŸ“Š ç›‘æµ‹ç‚¹æ¦‚å†µ</h3>
        <p>å½“å‰æ˜¾ç¤º <strong>3ä¸ª</strong> ä¿¡å·ç›‘æµ‹ç‚¹ï¼Œç‚¹å‡»æ ‡è®°æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯</p>
    </div>

    <!-- åœ°å›¾å®¹å™¨ -->
    <div id="map"></div>

    <!-- å›¾ä¾‹è¯´æ˜ -->
    <div class="legend">
        <h4>ğŸ“¶ ä¿¡å·å¼ºåº¦å›¾ä¾‹</h4>
        <div class="legend-item">
            <div class="legend-dot red"></div>
            <span>ä¸¥é‡ç›²åŒº (1-2åˆ†) - ä¿¡å·æå·®ï¼Œéœ€è¦ä¼˜å…ˆå¤„ç†</span>
        </div>
        <div class="legend-item">
            <div class="legend-dot blue"></div>
            <span>ä¿¡å·è¾ƒå·® (3-4åˆ†) - ä¿¡å·ä¸ç¨³å®šï¼Œå½±å“ä½¿ç”¨</span>
        </div>
        <div class="legend-item">
            <div class="legend-dot green"></div>
            <span>ä¿¡å·è‰¯å¥½ (7-10åˆ†) - ä¿¡å·æ­£å¸¸</span>
        </div>
    </div>

    <!-- é«˜å¾·åœ°å›¾API -->
    <script src="https://webapi.amap.com/maps?v=2.0&key=d9f68330ebc73e4856581f67deac33a5"></script>
    
    <script>
        // ä¿¡å·ç›‘æµ‹ç‚¹æ•°æ®é…ç½®
        const SIGNAL_DATA = [
            {
                name: "å—é€šå¸‚å´‡å·åŒºå—å¤§è¡—",
                position: [120.86419, 32.012962],
                signal: 2,
                network: "5G",
                reporter: "å¼ ä¸‰",
                time: "2024-01-15 10:30",
                note: "åœ°ä¸‹å•†åœºä¿¡å·è¾ƒå¼±"
            },
            {
                name: "å—é€šç«è½¦ç«™",
                position: [120.860919, 32.004182],
                signal: 3,
                network: "5G", 
                reporter: "ææ˜",
                time: "2024-01-19 07:30",
                note: "å€™è½¦å…éƒ¨åˆ†åº§ä½åŒºä¿¡å·ä¸ä½³"
            },
            {
                name: "å—é€šå¤§å­¦é™„å±åŒ»é™¢",
                position: [120.865718, 32.008145],
                signal: 2,
                network: "4G",
                reporter: "é™ˆå", 
                time: "2024-01-19 10:15",
                note: "ä½é™¢éƒ¨ç”µæ¢¯é—´ä¿¡å·å¾ˆå·®"
            }
        ];

        // åœ°å›¾é…ç½®
        const MAP_CONFIG = {
            zoom: 14,
            center: [120.863, 32.008],
            viewMode: '2D'
        };

        /**
         * æ ¹æ®ä¿¡å·å¼ºåº¦è·å–å›¾æ ‡é¢œè‰²
         * @param {number} signal - ä¿¡å·å¼ºåº¦ (1-10)
         * @returns {string} å›¾æ ‡é¢œè‰²ä»£ç 
         */
        function getIconColor(signal) {
            if (signal <= 2) return 'r';      // çº¢è‰² - ä¸¥é‡ç›²åŒº
            if (signal <= 4) return 'b';      // è“è‰² - ä¿¡å·è¾ƒå·®  
            if (signal <= 6) return 'y';      // é»„è‰² - ä¿¡å·ä¸€èˆ¬
            return 'g';                       // ç»¿è‰² - ä¿¡å·è‰¯å¥½
        }

        /**
         * åˆ›å»ºè‡ªå®šä¹‰æ ‡è®°å›¾æ ‡
         * @param {string} color - å›¾æ ‡é¢œè‰²ä»£ç 
         * @returns {AMap.Icon} å›¾æ ‡å¯¹è±¡
         */
        function createMarkerIcon(color) {
            return new AMap.Icon({
                size: new AMap.Size(25, 34),
                image: `https://webapi.amap.com/theme/v1.3/markers/n/mark_${color}.png`
            });
        }

        /**
         * è·å–ä¿¡å·å¼ºåº¦æè¿°
         * @param {number} signal - ä¿¡å·å¼ºåº¦
         * @returns {string} ä¿¡å·æè¿°
         */
        function getSignalDescription(signal) {
            if (signal <= 2) return 'ä¸¥é‡ç›²åŒº';
            if (signal <= 4) return 'ä¿¡å·è¾ƒå·®';
            if (signal <= 6) return 'ä¿¡å·ä¸€èˆ¬';
            return 'ä¿¡å·è‰¯å¥½';
        }

        /**
         * åˆå§‹åŒ–åœ°å›¾
         */
        function initMap() {
            console.log('å¼€å§‹åˆå§‹åŒ–åœ°å›¾...');

            // æ£€æŸ¥é«˜å¾·åœ°å›¾APIæ˜¯å¦åŠ è½½æˆåŠŸ
            if (typeof AMap === 'undefined') {
                alert('âŒ é«˜å¾·åœ°å›¾APIåŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼');
                return;
            }

            try {
                // åˆ›å»ºåœ°å›¾å®ä¾‹
                const map = new AMap.Map('map', MAP_CONFIG);
                console.log('âœ… åœ°å›¾åˆ›å»ºæˆåŠŸ');

                // æ·»åŠ æ‰€æœ‰ç›‘æµ‹ç‚¹æ ‡è®°
                addSignalMarkers(map);

                // åœ°å›¾åŠ è½½å®Œæˆäº‹ä»¶
                map.on('complete', function() {
                    console.log('âœ… åœ°å›¾åŠ è½½å®Œæˆï¼Œæ˜¾ç¤ºæ‰€æœ‰ç›‘æµ‹ç‚¹');
                });

            } catch (error) {
                console.error('âŒ åœ°å›¾åˆå§‹åŒ–å¤±è´¥:', error);
                alert(`åœ°å›¾åˆå§‹åŒ–å¤±è´¥: ${error.message}`);
            }
        }

        /**
         * æ·»åŠ ä¿¡å·ç›‘æµ‹ç‚¹æ ‡è®°
         * @param {AMap.Map} map - åœ°å›¾å®ä¾‹
         */
        function addSignalMarkers(map) {
            SIGNAL_DATA.forEach((point, index) => {
                const iconColor = getIconColor(point.signal);
                const icon = createMarkerIcon(iconColor);
                
                // åˆ›å»ºæ ‡è®°ç‚¹
                const marker = new AMap.Marker({
                    position: point.position,
                    title: `${point.name} - ä¿¡å·å¼ºåº¦: ${point.signal}/10 (${getSignalDescription(point.signal)})`,
                    icon: icon
                });

                // æ·»åŠ åˆ°åœ°å›¾
                map.add(marker);
                console.log(`âœ… å·²æ·»åŠ æ ‡è®°ç‚¹ ${index + 1}: ${point.name}`);
            });
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–åœ°å›¾
        window.onload = function() {
            console.log('ğŸš€ é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–...');
            initMap();
        };
    </script>
</body>
</html> 